<!doctype html>
<html lang="en">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
        <title>E-commerce Michael</title>
        <!--  stylesheet public (bootstrap icons typography)  -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
       <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <!--   stylesheet local path  -->
       <link rel="stylesheet" href="../../public/css/style.css" type="text/css" media="all" />
    </head>
    <body>
        <!-- start code logo nav and search box -->
        <div
            class="container nav-top d-flex justify-content-center align-items-center"
        >
            <div class="d-flex w-100 justify-content-center align-items-center">
                <div>
                    <img
                        src="../../public/img/logo.png"
                        class="logo-nav"
                        alt=""
                    />
                </div>
                <div class="w-100">
                    <div class="form">
                        <i class="bi bi-search"></i>
                        <input
                            type="text"
                            class="form-control form-input"
                            placeholder="Search anything..."
                        />
                    </div>
                </div>
            </div>
        </div>
        <!-- end code logo nav and search box -->

        <!-- Animation shape home Start -->
        <div
            class="d-flex justify-content-center align-items-center flex-column con-animation-shape"
        >
            <div class="shape1 fadeInDown de1 du1">
                <div
                    class="position-absolute"
                    style="bottom: 5%; margin-left: 3%"
                >
                    <h1 class="fw-bold text-light fadeIn de1 du4 mt-3" id="welcomeHomeUser">
                        Checkout
                    </h1>
                </div>
            </div>
            <div class="shape2 fadeInDown de1 du2"></div>
        </div>
        <!-- Animation shape home End -->
        <!-- start content value -->
        <main class="mt-main">
      <div class="container-main text-dark">
       <div class="w-100 pb-4">
            <div class="w-100" style="overflow-y: hidden;">
              <div class="cart-container p-2">
                <div class="product-box bg-transparent border-1 border-primary border rounded-2 w-100 my-2">
                  <div class="d-flex w-100 p-2 gap-2 align-items-center text-dark">
                    <img src="" id="img-checkout" style="width: 100px;" alt="product">
                    <div class="gap-0 m-0 p-0" style="width: 100%;">
                    <p class="gap-0 m-0 p-0" id="product-name"></p>
                    <p class="gap-0 m-0 p-0" id="product-price"></p>
                    <p class="gap-0 m-0 p-0" id="product-estimasi"></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> 
       <div class="mt-lg-5 w-100 text-dark d-flex flex-column position-relative" style="height: 300px;">
         <h1 class="text-center text-uppercase fw-bold">Product</h1>
         <div class="position-relative w-100 text-dark px-3">
           <div class="position-absolute d-flex flex-column" style="left:2%; text-align:left;">
             <label>Nama product</label>
             <label>Brand</label>
             <label>Category</label>
             <label>QTY</label>
             <label>Estimasi produk tiba</label>
             <label>Harga product</label>
             <label>Biaya admin</label>
             <label>Total</label>
           </div>
           <div class="position-absolute d-flex flex-column top-0" style="right:2%; text-align:right;">
             
             <label id="name-product"></label>
             <label id="brand-product"></label>
             <label id="category-product"></label>
             <label id="jumlah-product">x1</label>
             <label id="estimasi-product"></label>
             <label id="price-product"></label>
             <label id="">1.500,00</label>
             <label id="total-harga"></label>
           </div>
         </div>
       </div>
         <div class="w-100 d-flex flex-column gap-1 align-items-center">
           <button type="button" class="btn btn-outline-primary text-primary text-center align-items-center justify-content-center d-flex w-75 gap-1 rounded-2 py-2">Add To Troli</button>
           <button type="button" class="btn btn-primary text-light text-center justify-content-center gap-1 align-items-center d-flex w-75 rounded-2 border-0 py-2" onclick="window.location.href='/pages/checkout/payment/'">Order<i class="bi bi-arrow-right" style="font-size: 1.3em;"></i></button>
         </div>
       </div>

            <!-- start footer bootom sticky -->
        <!--     <footer class="bg-dark">hello</footer> -->
            <!-- end footer bootom sticky -->
        </main>
        <!-- end content value -->

        <!-- start code navbar bottom -->
        <nav class="navbar navbar-expand fixed-bottom" id="navBottom">
            <ul class="navbar-nav nav-justified w-100">
                <li class="nav-item">
                    <i
                        onclick="window.location.href = '/pages/home/'"
                        class="bi i-nav bi-house"
                    ></i>
                </li>
                <li class="nav-item">
                    <i
                        onclick="window.location.href = '/pages/product/'"
                        class="bi i-nav bi-box-seam"
                    ></i>
                </li>
                <li class="nav-item">
                    <i
                        onclick="window.location.href = '/pages/troli/'"
                        class="bi i-nav bi-bag nav-active"
                    ></i>
                </li>
                <li class="nav-item">
                    <i
                        onclick="window.location.href = '/pages/account/'"
                        class="bi i-nav bi-person"
                    ></i>
                </li>
            </ul>
        </nav>
        <!-- end code navbar bottom -->

        <!-- script js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>
        <script>
const checkoutLS = localStorage.getItem('checkout');
// Display product details on the checkout page
// Fungsi untuk mendekripsi teks dengan AES
if (checkoutLS) {
function decryptText(ciphertext, key) {
    var bytes  = CryptoJS.AES.decrypt(ciphertext, key);
    return bytes.toString(CryptoJS.enc.Utf8);
}
      document.addEventListener("DOMContentLoaded", function() {
        const urlParams = new URLSearchParams(window.location.search);
        const productName = urlParams.get('product');
        const productPrice = urlParams.get('price');
        const productCg = urlParams.get('cg');
        const productImg = urlParams.get('pimg');
        const productEst = urlParams.get('est');
        
    // Dekripsi nama produk dan harga sebelum menampilkannya
    var decryptedProductName = decryptText(productName, 'secretKey');
    var decryptedProductPrice = decryptText(productPrice, 'secretKey');
    var decryptedProductCg = decryptText(productCg, 'secretKey');
    var decryptedProductImg = decryptText(productImg, 'secretKey');
    var decryptedProductEst = decryptText(productEst, 'secretKey');
        //card
        document.getElementById('product-name').innerText = `${decryptedProductName}`;
        document.getElementById('product-price').innerText = `${decryptedProductPrice}`;
        document.getElementById('product-estimasi').innerText = `Estimasi product: ${decryptedProductEst}`;
        document.getElementById('img-checkout').src = decryptedProductImg;
        
        if (
          decryptedProductCg === 'FREE FIRE' ||
          decryptedProductCg === 'MOBILE LEGENDS' ||
          decryptedProductCg === 'COC' ||
          decryptedProductCg === 'COD' ||
          decryptedProductCg === 'FIFA' ||
          decryptedProductCg === 'PUBG'
          ) {
     document.getElementById("category-product").innerText = "GAMES";
          }
        if (
          decryptedProductCg === 'TIKTOK' ||
          decryptedProductCg === 'YOUTUBE' ||
          decryptedProductCg === 'INSTAGRAM' ||
          decryptedProductCg === 'FACEBOOK'
          ) {
     document.getElementById("category-product").innerText = "SOSMED";
          }
          var hargaTanpaTitik = decryptedProductPrice.replace(/\./g, "").replace(",", ".");
          var totalHarga = parseFloat(hargaTanpaTitik) + 1500.00;
          var totalHargaDalamFormat = totalHarga.toLocaleString("id-ID", { style: "currency", currency: "IDR" });

       // desc
        document.getElementById('name-product').innerText = `${decryptedProductName}`;
        document.getElementById('brand-product').innerText = `${decryptedProductCg}`;
        document.getElementById('price-product').innerText = `${decryptedProductPrice}`;
        document.getElementById('estimasi-product').innerText = `${decryptedProductEst}`;
        document.getElementById('total-harga').innerText = totalHargaDalamFormat;
      });
      localStorage.removeItem('checkout');
} else {
  window.location.href = "/pages/home/";
}
        
        </script>
        <script type="text/javascript" src="../../public/js/script.js"></script>
    </body>
</html>
